var timers={};
jQuery(document).ready(function(){jQuery("#sortable").sortable({placeholder:"ui-state-highlight"});jQuery("#sortable").disableSelection();jQuery("#skype_cancel").click(function(a){a.preventDefault();window.location.reload()});jQuery("#skype_settings #skype_save").click(function(a){a.preventDefault();var c="table tbody",b=a.target.className.split(" ")[1],d={};switch(b){case "_attr":d[b]={};break;case "_prio":c="#sortable";default:d[b]=[]}a=jQuery("form#skype_settings "+c);jQuery.each(jQuery(a)[0].children,function(c,
a){var e=!1,g=!1;field=a.children[1].children[0];"text"===field.type&&1>field.value.length&&(e="false");"checkbox"===field.type&&(e=field.checked?"1":"0");"select"===field.tagName.toLowerCase()&&(e=field.options[field.selectedIndex].value);switch(b){case "_attr":g=g?g:field.name;break;default:g=c}e=e?e:field.value;d[b][g]=e});do_ajax(d)})});
function do_ajax(a){jQuery.ajax({type:"POST",url:"/wp-content/plugins/WPSkypeStatus/_admin/skype.ajax.php",data:{skype_set:null,data:a},error:function(c,a,d){show_message("An error ("+d+") occurred when trying to save your changes.","error",!1)},success:function(a){a=JSON.parse(a);for(var b="Settings saved with %d rows updated.",d="updated",f=0;f<a.length;f++)!1===a[f]||"false"===a[f]?(b="An error occurred while trying to update the database.",d="error"):b=b.replace("%d",a[f]),show_message(b,d)}})}
function show_message(a,c,b){b="undefined"===typeof b;c="updated"===c.toLowerCase()||"error"===c.toLowerCase()?c:"updated";for(_id="message_"+Math.floor(1E5*Math.random()+1);0<jQuery(_id).length;)_id="message_"+Math.floor(1E5*Math.random()+1);jQuery("#ajax-response").append("<div id='"+_id+"' class='"+c+" fade'><p>"+a+"</p></div>");b&&(timers[_id]=setTimeout(function(){close_message(_id)},5E3))}
function close_message(a){jQuery("#"+a).hide(400,function(){jQuery("#"+a).remove();clearTimeout(timers[a]);delete timers[a]})};